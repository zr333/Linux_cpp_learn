#include <stdio.h>

int Add(int x, int y)
{
	int z = 0;
	z = x + y;
	return z;
}


int main()
{
	int a = 10;
	int b = 20;
	int c = 0;
	c = Add(a, b);
	printf("%d\n", c);
	return 0;
}

/*
函数调用的栈帧演化过程
函数调用时的栈帧创建与销毁是栈操作的核心过程，涉及多个寄存器与内存操作的精确配合。以 x86_64 架构为例，完整流程如下：

调用前准备：
调用者将超出寄存器传递范围的参数压入栈（按从右到左顺序）
执行call指令：将下一条指令地址（返回地址）压栈，跳转到被调用函数入口

被调用函数入口（序幕）：
压入当前%rbp（帧指针）到栈（保存调用者栈帧基地址）
将%rsp的值赋给%rbp（建立当前栈帧基地址）
调整%rsp向下移动，为局部变量预留空间（sub $0xXX, %rsp）
保存需要保护的寄存器（如%rbx、%r12等）到栈

函数执行：
通过%rbp偏移访问参数（如8(%rbp)为第一个栈传递参数）
通过%rbp负偏移访问局部变量（如-4(%rbp)为第一个局部变量）

函数返回（尾声）：
恢复保存的寄存器值
调整%rsp回到%rbp位置（释放局部变量空间）
弹出栈中保存的%rbp（pop %rbp），恢复调用者帧指针
执行ret指令：弹出返回地址并跳转，栈帧销毁
*/